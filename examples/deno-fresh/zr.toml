# Auto-generated by: zr init --detect
# Deno project with Fresh framework patterns

[tasks.dev]
description = "Start development server with hot reload"
cmd = "deno run --allow-net --allow-read --watch main.ts"

[tasks.start]
description = "Start production server"
cmd = "deno run --allow-net --allow-read main.ts"

[tasks.test]
description = "Run tests"
cmd = "deno test --allow-read"

[tasks.fmt]
description = "Format code"
cmd = "deno fmt"

[tasks.lint]
description = "Lint code"
cmd = "deno lint"

[tasks.check]
description = "Type check without execution"
cmd = "deno check main.ts"

# Enhanced tasks (not from auto-detection)

[tasks.cache]
description = "Cache dependencies"
cmd = "deno cache --reload main.ts"

[tasks.bundle]
description = "Bundle for deployment"
cmd = "deno bundle main.ts dist/bundle.js"

[tasks.compile]
description = "Compile to native binary"
cmd = "deno compile --allow-net --allow-read --output dist/server main.ts"

[tasks.bench]
description = "Run benchmarks"
cmd = "deno bench --allow-read"

[tasks.coverage]
description = "Generate test coverage"
cmd = "deno test --coverage=coverage && deno coverage coverage"

# Workflows

[workflow.ci]
description = "Continuous integration workflow"
stages = [
  { tasks = ["fmt", "lint"], fail_fast = true },
  { tasks = ["check"] },
  { tasks = ["test"] }
]

[workflow.build]
description = "Build and bundle for production"
stages = [
  { tasks = ["cache"] },
  { tasks = ["check"] },
  { tasks = ["test"] },
  { tasks = ["bundle", "compile"], parallel = true }
]

[workflow.pre-commit]
description = "Pre-commit checks"
stages = [
  { tasks = ["fmt", "lint"], fail_fast = true },
  { tasks = ["test"] }
]
